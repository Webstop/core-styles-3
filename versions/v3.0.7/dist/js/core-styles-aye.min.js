!function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;(function(){var Cookies={set:function(name,value,ttl,domain){var expires="",cookieDomain="";if(ttl){var date=new Date;date.setTime(date.getTime()+60*ttl*1e3),expires="; expires="+date.toGMTString()}domain&&(cookieDomain="; domain="+domain),document.cookie=name+"="+escape(value)+expires+cookieDomain+"; path=/; samesite=lax"},get:function(name){var i,c,nameEQ=name+"=",ca=document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return unescape(c.substring(nameEQ.length,c.length))}return null}},config={urlPrefix:"",visitsUrl:"/ahoy/visits",eventsUrl:"/ahoy/events",page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{},visitParams:{},withCredentials:!1,visitDuration:240,visitorDuration:1051200},ahoy=window.ahoy||window.Ahoy||{};ahoy.configure=function(options){for(var key in options)Object.prototype.hasOwnProperty.call(options,key)&&(config[key]=options[key])},ahoy.configure(ahoy);var visitId,visitorId,track,$=window.jQuery||window.Zepto||window.$,isReady=!1,queue=[],canStringify="undefined"!=typeof JSON&&void 0!==JSON.stringify,eventQueue=[];function visitsUrl(){return config.urlPrefix+config.visitsUrl}function eventsUrl(){return config.urlPrefix+config.eventsUrl}function isEmpty(obj){return 0===Object.keys(obj).length}function canTrackNow(){return(config.useBeacon||config.trackNow)&&isEmpty(config.headers)&&canStringify&&void 0!==window.navigator.sendBeacon&&!config.withCredentials}function serialize(object){var data=new FormData;for(var key in object)Object.prototype.hasOwnProperty.call(object,key)&&data.append(key,object[key]);return data}function setCookie(name,value,ttl){Cookies.set(name,value,ttl,config.cookieDomain||config.domain)}function getCookie(name){return Cookies.get(name)}function destroyCookie(name){Cookies.set(name,"",-1)}function log(message){getCookie("ahoy_debug")&&window.console.log(message)}function setReady(){for(var callback;callback=queue.shift();)callback();isReady=!0}function matchesSelector(element,selector){var matches=element.matches||element.matchesSelector||element.mozMatchesSelector||element.msMatchesSelector||element.oMatchesSelector||element.webkitMatchesSelector;return matches?matches.apply(element,[selector])?element:element.parentElement?matchesSelector(element.parentElement,selector):null:(log("Unable to match"),null)}function onEvent(eventName,selector,callback){document.addEventListener(eventName,(function(e){var matchedElement=matchesSelector(e.target,selector);if(matchedElement){var skip=getClosest(matchedElement,"data-ahoy-skip");if(null!==skip&&"false"!==skip)return;callback.call(matchedElement,e)}}))}function documentReady(callback){"interactive"===document.readyState||"complete"===document.readyState?setTimeout(callback,0):document.addEventListener("DOMContentLoaded",callback)}function generateId(){return window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}function saveEventQueue(){config.cookies&&canStringify&&setCookie("ahoy_events",JSON.stringify(eventQueue),1)}function csrfToken(){var meta=document.querySelector("meta[name=csrf-token]");return meta&&meta.content}function csrfParam(){var meta=document.querySelector("meta[name=csrf-param]");return meta&&meta.content}function CSRFProtection(xhr){var token=csrfToken();token&&xhr.setRequestHeader("X-CSRF-Token",token)}function sendRequest(url,data,success){if(canStringify)if($&&$.ajax)$.ajax({type:"POST",url:url,data:JSON.stringify(data),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:CSRFProtection,success:success,headers:config.headers,xhrFields:{withCredentials:config.withCredentials}});else{var xhr=new XMLHttpRequest;for(var header in xhr.open("POST",url,!0),xhr.withCredentials=config.withCredentials,xhr.setRequestHeader("Content-Type","application/json"),config.headers)Object.prototype.hasOwnProperty.call(config.headers,header)&&xhr.setRequestHeader(header,config.headers[header]);xhr.onload=function(){200===xhr.status&&success()},CSRFProtection(xhr),xhr.send(JSON.stringify(data))}}function eventData(event){var data={events:[event]};return config.cookies&&(data.visit_token=event.visit_token,data.visitor_token=event.visitor_token),delete event.visit_token,delete event.visitor_token,data}function trackEvent(event){ahoy.ready((function(){sendRequest(eventsUrl(),eventData(event),(function(){for(var i=0;i<eventQueue.length;i++)if(eventQueue[i].id===event.id){eventQueue.splice(i,1);break}saveEventQueue()}))}))}function trackEventNow(event){ahoy.ready((function(){var data=eventData(event),param=csrfParam(),token=csrfToken();param&&token&&(data[param]=token),data.events_json=JSON.stringify(data.events),delete data.events,window.navigator.sendBeacon(eventsUrl(),serialize(data))}))}function page(){return config.page||window.location.pathname}function presence(str){return str&&str.length>0?str:null}function cleanObject(obj){for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&null===obj[key]&&delete obj[key];return obj}function eventProperties(){return cleanObject({tag:this.tagName.toLowerCase(),id:presence(this.id),class:presence(this.className),page:page(),section:getClosest(this,"data-section")})}function getClosest(element,attribute){for(;element&&element!==document;element=element.parentNode)if(element.hasAttribute(attribute))return element.getAttribute(attribute);return null}function createVisit(){if(isReady=!1,visitId=ahoy.getVisitId(),visitorId=ahoy.getVisitorId(),track=getCookie("ahoy_track"),!1===config.cookies||!1===config.trackVisits)log("Visit tracking disabled"),setReady();else if(visitId&&visitorId&&!track)log("Active visit"),setReady();else if(visitId||setCookie("ahoy_visit",visitId=generateId(),config.visitDuration),getCookie("ahoy_visit")){log("Visit started"),visitorId||setCookie("ahoy_visitor",visitorId=generateId(),config.visitorDuration);var data={visit_token:visitId,visitor_token:visitorId,platform:config.platform,landing_page:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,js:!0};for(var key in document.referrer.length>0&&(data.referrer=document.referrer),config.visitParams)Object.prototype.hasOwnProperty.call(config.visitParams,key)&&(data[key]=config.visitParams[key]);log(data),sendRequest(visitsUrl(),data,(function(){destroyCookie("ahoy_track"),setReady()}))}else log("Cookies disabled"),setReady()}ahoy.ready=function(callback){isReady?callback():queue.push(callback)},ahoy.getVisitId=ahoy.getVisitToken=function(){return getCookie("ahoy_visit")},ahoy.getVisitorId=ahoy.getVisitorToken=function(){return getCookie("ahoy_visitor")},ahoy.reset=function(){return destroyCookie("ahoy_visit"),destroyCookie("ahoy_visitor"),destroyCookie("ahoy_events"),destroyCookie("ahoy_track"),!0},ahoy.debug=function(enabled){return!1===enabled?destroyCookie("ahoy_debug"):setCookie("ahoy_debug","t",525600),!0},ahoy.track=function(name,properties){var event={name:name,properties:properties||{},time:(new Date).getTime()/1e3,id:generateId(),js:!0};return ahoy.ready((function(){config.cookies&&!ahoy.getVisitId()&&createVisit(),ahoy.ready((function(){log(event),event.visit_token=ahoy.getVisitId(),event.visitor_token=ahoy.getVisitorId(),canTrackNow()?trackEventNow(event):(eventQueue.push(event),saveEventQueue(),setTimeout((function(){trackEvent(event)}),1e3))}))})),!0},ahoy.trackView=function(additionalProperties){var properties={url:window.location.href,title:document.title,page:page()};if(additionalProperties)for(var propName in additionalProperties)Object.prototype.hasOwnProperty.call(additionalProperties,propName)&&(properties[propName]=additionalProperties[propName]);ahoy.track("$view",properties)},ahoy.trackClicks=function(selector){if(void 0===selector)throw new Error("Missing selector");onEvent("click",selector,(function(e){var properties=eventProperties.call(this,e);properties.text="input"===properties.tag?this.value:(this.textContent||this.innerText||this.innerHTML).replace(/[\s\r\n]+/g," ").trim(),properties.href=this.href,ahoy.track("$click",properties)}))},ahoy.trackSubmits=function(selector){if(void 0===selector)throw new Error("Missing selector");onEvent("submit",selector,(function(e){var properties=eventProperties.call(this,e);ahoy.track("$submit",properties)}))},ahoy.trackChanges=function(selector){if(log("trackChanges is deprecated and will be removed in 0.5.0"),void 0===selector)throw new Error("Missing selector");onEvent("change",selector,(function(e){var properties=eventProperties.call(this,e);ahoy.track("$change",properties)}))};try{eventQueue=JSON.parse(getCookie("ahoy_events")||"[]")}catch(e){}for(var i=0;i<eventQueue.length;i++)trackEvent(eventQueue[i]);ahoy.start=function(){createVisit(),ahoy.start=function(){}},documentReady((function(){config.startOnReady&&ahoy.start()}))})(),function(webstop){webstop.aye={};let attrWatching="data-aye-watching";webstop.aye.cargo=function(element){let properties={};properties.store_number=webstop.storeNumber;for(let attribute of element.attributes)0===attribute.name.indexOf("data-aye-property-")?properties[attribute.name.slice(18).split("-").join("_").toLowerCase()]=attribute.value:"data-aye-click"==attribute.name||"data-aye-view"==attribute.name||"data-aye-submit"==attribute.name||attribute.name==attrWatching||0===attribute.name.indexOf("data-aye-")&&(properties[attribute.name.slice(9).split("-").join("_").toLowerCase()]=attribute.value);return properties},webstop.aye.formidable=function(element,cargo={}){return element.querySelectorAll("input,select,textarea,output").forEach((field=>{let value=field.value;field.getAttributeNames().forEach((attr=>{0===attr.indexOf("data-aye-property-")&&(cargo[attr.slice(18).split("-").join("_").toLowerCase()]=value)}))})),cargo},webstop.aye.track=function(name,element){let cargo=webstop.aye.cargo(element),ahoyName=name+" ";"submit"===name?(cargo=webstop.aye.formidable(element,cargo),ahoyName+=element.getAttribute("data-aye-submit")):"click"===name?ahoyName+=element.getAttribute("data-aye-click"):"view"===name&&(ahoyName+=element.getAttribute("data-aye-view")),ahoy.track(ahoyName,cargo)},webstop.aye.watch=function(){let clickables=document.querySelectorAll("[data-aye-click]:not([data-aye-watching])"),submitables=document.querySelectorAll("[data-aye-submit]:not([data-aye-watching])"),viewables=document.querySelectorAll("[data-aye-view]:not([data-aye-watching])");clickables.forEach((function(element){webstop.aye.listen("click",element)})),submitables.forEach((function(element){webstop.aye.listen("submit",element)})),viewables.forEach((function(element){!1===element.hasAttribute(attrWatching)&&(element.setAttribute(attrWatching,""),webstop.aye.track("view",element))}))},webstop.aye.listen=function(name,element){!1===element.hasAttribute(attrWatching)&&(element.setAttribute(attrWatching,""),element.addEventListener(name,(function(){webstop.aye.track(name,this)})))},webstop.aye.start=function(){webstop.live(webstop.aye.watch)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",webstop.aye.start):webstop.aye.start()}(window.webstop=window.webstop||{})}();