{"version":3,"file":"core-styles-aye.js","sources":["../../js/aye.js"],"sourcesContent":["\"use strict\";\n\n// Aye\n\n// Please Note: this file is divided into 2 sections (I & II).\n// Section I is the newer code that has been refactored into Vanilla JS.\n// Section II is the older jQuery based code that still needs to be converted to Vanilla JS.\n\n// Section I: Newer Vanilla JS version. Namespaced into window.webstop.aye\n(function( webstop ) {\n\n  // Public Sub-Class\n  webstop.aye = {}\n  // Aye data attributes\n  let attrView     = 'data-aye-view';\n  let attrClick    = 'data-aye-click';\n  let attrSubmit   = 'data-aye-submit';\n  let attrWatching = 'data-aye-watching';\n\n\n  webstop.aye.cargo = function(element){\n    let properties = {};\n    for(let attribute of element.attributes) {\n      if(attribute.name.indexOf('data-aye-property-')===0) {\n        properties[attribute.name.slice(18).split(\"-\").join(\"_\").toLowerCase()] = attribute.value;\n      } else if(attribute.name == attrClick || attribute.name == attrView || attribute.name == attrSubmit || attribute.name == attrWatching ){\n        // skip these attributes\n      } else if(attribute.name.indexOf('data-aye-')===0) {\n        properties[attribute.name.slice(9).split(\"-\").join(\"_\").toLowerCase()] = attribute.value;\n      }\n    }\n    return properties;\n  }\n\n  webstop.aye.formidable = function(element, cargo = {}) {\n    let fields = element.querySelectorAll('input,select,textarea,output');\n    fields.forEach((field) => {\n      let value = field.value;\n      field.getAttributeNames().forEach((attr) => {\n        if (attr.indexOf('data-aye-property-') === 0) {\n          cargo[attr.slice(18).split('-').join('_').toLowerCase()] = value;\n        }\n      });\n    });\n\n    return cargo;\n  }\n\n  webstop.aye.track = function(name, element){\n    let cargo = webstop.aye.cargo(element);\n    let ahoyName = name + ' ';\n    if(name === 'submit') {\n      cargo = webstop.aye.formidable(element, cargo);\n      ahoyName += element.getAttribute(attrSubmit);\n    } else if(name === 'click') {\n      ahoyName += element.getAttribute(attrClick);\n    } else if(name === 'view') {\n      ahoyName += element.getAttribute(attrView);\n    }\n    ahoy.track(ahoyName, cargo);\n  }\n\n  webstop.aye.watch = function(){\n    let clickables = document.querySelectorAll('[data-aye-click]:not([data-aye-watching])');\n    let submitables = document.querySelectorAll('[data-aye-submit]:not([data-aye-watching])');\n    let viewables = document.querySelectorAll('[data-aye-view]:not([data-aye-watching])');\n\n    clickables.forEach(function(element) {\n      webstop.aye.listen('click', element);\n    });\n\n    submitables.forEach(function(element) {\n      webstop.aye.listen('submit', element);\n    });\n\n    viewables.forEach(function(element) {\n      if(element.hasAttribute(attrWatching) === false){\n        element.setAttribute(attrWatching, '');\n        webstop.aye.track('view', element);\n      }\n    });\n\n  }\n\n  // Name can be 'click', 'submit', or 'view'\n  webstop.aye.listen = function(name, element){\n    if(element.hasAttribute(attrWatching) === false){\n      element.setAttribute(attrWatching, '');\n      element.addEventListener(name, function() {\n        webstop.aye.track(name, this);\n      });\n    }\n  }\n\n  webstop.aye.start = function(){\n\n    // Live executes the watch script once at init, so we don't have to run it again in here.\n    // webstop.aye.watch();\n    webstop.live(webstop.aye.watch);\n  }\n\n\n  // Starts Aye tracking only when the DOM is ready.\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", webstop.aye.start);\n  } else {\n    webstop.aye.start();\n  }\n\n})( window.webstop = window.webstop || {} );\n\n"],"names":[],"mappings":"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"}