{"version":3,"file":"core-styles-aye.js","sources":["../../js/aye.js"],"sourcesContent":["\"use strict\";\n\n// Aye\n\n$(function() {\n  // Here we set the thee possible events types data-aye-view, data-aye-click, & data-aye-submit\n\n  // Sends an ahoy track when the element is served to the browser.\n  // TODO: enhance to track items brought onto the page via Ajax. It currently only works on items in the initial page render.\n  $('[data-aye-view]').each(function(){\n    let $element = $(this);\n    let cargo = ayeCargo(this);\n    ahoy.track('view ' + $element.attr('data-aye-view'), cargo);\n  });\n\n  // Sends an ahoy track when the user clicks on the element.\n  $(document.body).on('click', '[data-aye-click]',  function(){\n    let $element = $(this);\n    let cargo = ayeCargo(this);\n    ahoy.track('click ' + $element.attr('data-aye-click'), cargo);\n  });\n\n  // Sends an ahoy track when a form is submitted. Place on the form tag.\n  $(document.body).on('submit', '[data-aye-submit]', function(){\n    let $element = $(this);\n    let cargo = ayeCargo(this);\n    cargo = ayeFormidable($element, cargo);\n    ahoy.track('submit ' + $element.attr('data-aye-submit'), cargo);\n  });\n\n\n  // The next two functions (ayeCargo & ayeFormidable) gather data and format it for submitting to ahoy.track\n\n  // ayeCargo gathers Aye data attributes from an HTML element and formats them for API usage.\n  function ayeCargo(element){\n    let properties = {};\n    $.each(element.attributes, function( index, attr ) {\n      if(attr.name.indexOf('data-aye-property-')===0) {\n        properties[attr.name.slice(18).split(\"-\").join(\"_\").toLowerCase()] = attr.value;\n      } else if(attr.name == 'data-aye-click' || attr.name == 'data-aye-view' || attr.name =='data-aye-submit' ){\n        // skip these attributes\n      } else if(attr.name.indexOf('data-aye-')===0) {\n        properties[attr.name.slice(9).split(\"-\").join(\"_\").toLowerCase()] = attr.value;\n      }\n    });\n    return properties;\n  }\n\n  // ayeFormidable gathers Aye data attributes from HTML form elements and formats them for API usage.\n  function ayeFormidable($element, cargo = {}){\n    $element.find('input,select,textarea,output').each(function(index){\n      let value = this.value;\n      $.each(this.attributes, function( index, attr ) {\n        if(attr.name.indexOf('data-aye-property-')===0) {\n          cargo[attr.name.slice(18).split(\"-\").join(\"_\").toLowerCase()] = value;\n        }\n      });\n    });\n    return cargo;\n  }\n\n});\n\n"],"names":[],"mappings":"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"}