<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title> Core-Styles 3 </title>
    

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Montserrat:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/docs.css" />
  </head>
  <body>
<section class="wsg-content">
    
<div class="admin admin-with-sidenav ">
  <header class="admin-header" role="banner">
    <nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-dark wsg-header shadow">
  <div class="container-fluid">
    <a class="navbar-brand ms-2" href="/"><img
        src="https://www.webstop.com/assets/Webstop-logos/webstop-twocolor-landscape-dark-bg-72dpi-e6425f6d6e9ec4cc90742a883b2997bb28191590bfd8762222ed4723865dcaef.png" style="max-width: 127px; /* 889/7 = 127 */"></a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs/3.0/components/ajax/ajax-form/">Docs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/dev/ad-builder/">Dev</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/guides/">Guides</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            More
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li>
              <a class="dropdown-item" href="https://github.com/Webstop/core-styles-3#core-styles-3"
                target="_blank">GitHub</a>
            </li>
            <li>
              <a class="dropdown-item" href="https://github.com/Webstop/webstop-wiki#webstop-app-builders-wiki"
                target="_blank">Wiki</a>
            </li>
            <li>
              <a class="dropdown-item" href="https://github.com/Webstop/core-specs#webstop-core-specifications"
                target="_blank">Specs</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

  </header>
  <nav class="admin-sidenav" role="navigation">
    <aside>
  <nav class="collapse show flex" id="docs-nav" aria-label="Docs navigation">
    <ul class="list-unstyled mb-0 py-3 pt-md-1">
      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse"
          data-bs-target="#getstart-menu-collapse" aria-expanded="false" aria-controls="getstart-menu-collapse">
          <strong> Getting Started</strong>
        </button>

        <div
          class="collapse "
          id="getstart-menu-collapse">

          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/getting-started/introduction/" class="d-inline-flex rounded">Introduction</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/getting-started/conventions/" class="d-inline-flex rounded">Conventions</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      

      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse" data-bs-target="#guides-menu-collapse"
          aria-expanded="false">
          <strong> Guides</strong>
        </button>

        <div
          class="collapse  show "
          id="guides-menu-collapse">
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/guides/3.0/overview/" class="d-inline-flex rounded">Guide Overview</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/guides/3.0/components/" class="d-inline-flex rounded">Front-End Components</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/guides/3.0/development-approach/" class="d-inline-flex rounded">Development Approach</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/guides/3.0/development-process/" class="d-inline-flex rounded">Development Process</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4  left-nav-active ">
              <a href="/guides/3.0/working-with-ajax/" class="d-inline-flex rounded">Working with AJAX</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      


      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse" data-bs-target="#layout-menu-collapse"
          aria-expanded="false">
          <strong> Layouts</strong>
        </button>

        <div
          class="collapse "
          id="layout-menu-collapse">
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/layouts/admin/" class="d-inline-flex rounded">Admin Layout</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/layouts/site/" class="d-inline-flex rounded">Public Site Layout</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/layouts/toolbar/" class="d-inline-flex rounded">Toolbar</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      


      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse" data-bs-target="#components-menu-collapse"
          aria-expanded="false">
          <strong> Components</strong>
        </button>

        <div
          class="collapse "
          id="components-menu-collapse">
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/ajax/ajax-form/" class="d-inline-flex rounded">Ajax Form</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/ajax/ajax-load/" class="d-inline-flex rounded">Ajax Load</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/ajax/ajax-modal/" class="d-inline-flex rounded">Ajax Modal</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/forms/checkbox-selector/" class="d-inline-flex rounded">Checkbox Selector</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/forms/form-toggles/" class="d-inline-flex rounded">Form Toggles</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/forms/search/" class="d-inline-flex rounded">Live Search</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/tagging/tag-search/" class="d-inline-flex rounded">Tag Search</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/components/tagging/tags/" class="d-inline-flex rounded">Tags</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      

      
      

      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse" data-bs-target="#icons-menu-collapse"
          aria-expanded="false">
          <strong> Icons</strong>
        </button>

        <div
          class="collapse "
          id="icons-menu-collapse">
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/icons/overview/" class="d-inline-flex rounded">1st Icons Overview</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/icons/admin-icons/" class="d-inline-flex rounded">Admin Icons</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/icons/all-icons/" class="d-inline-flex rounded">All Icons</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/icons/core-icons/" class="d-inline-flex rounded">Core Icons</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/icons/popular-icons/" class="d-inline-flex rounded">Popular Icons</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/icons/ui-icons/" class="d-inline-flex rounded">UI Icons</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      

      
      

      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse" data-bs-target="#grocery-menu-collapse"
          aria-expanded="false">
          <strong> Grocery</strong>
        </button>

        <div
          class="collapse "
          id="grocery-menu-collapse">
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/grocery/tracking/" class="d-inline-flex rounded">Aye, Analytics Tracking</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      

      
      
      
      <li class="mb-1">
        <button class="btn d-inline-flex rounded" data-bs-toggle="collapse" data-bs-target="#utilities-menu-collapse"
          aria-expanded="false">
          <strong> Utilities</strong>
        </button>

        <div
          class="collapse "
          id="utilities-menu-collapse">
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/utilities/box/" class="d-inline-flex rounded">Box Utilities</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/utilities/max-width/" class="d-inline-flex rounded">Max Width</a>
            </li>

          </ul>
          
          <ul class="list-unstyled fw-normal pb-1 small">

            <li
              class="py-2 ps-4 ">
              <a href="/docs/3.0/utilities/min-width/" class="d-inline-flex rounded">Min Width</a>
            </li>

          </ul>
          
        </div>
      </li>
      
      

      
      
    </ul>
  </nav>
</aside>

  </nav>
  <main class="admin-page" role="main">
    <section class="docs-heading inner-shadow">
      <h1 class="docs-heading-title shadow">
        Working with AJAX
      </h1>
      <p class="docs-heading-tagline">Guide for working with components that utilize AJAX .</p>
    </section>
    <p>When working with AJAX you will sometimes need a response from the server that changes based on the data you submit
along with an AJAX request. This can be challenging when working with our <a href="https://jekyllrb.com">Jekyll</a>
site because it is a simple static site generator. How do you know the fancy JavaScript you are writing in the
core-styles development site is sending the required data correctly if it is being submitted to a simple
static HTML page?</p>
<p>We have answered this problem by embeding a very basic <a href="http://sinatrarb.com">Sinatra</a> app into our core-styles repo.
With this simple Sinatra app we are able to read post and get parameters and either display them or apply
Ruby code to them. This way we can test that the JavaScript we have written to perform AJAX requests is
functioning properly.</p>
<p><strong>Note:</strong> <em>The goal here is to write faux responses. We don&rsquo;t want to write full back-end feature code, but
rather just enough that we are able to verify our JavaScripts are making well formed requests and/or sending
the data and parameters we expect.</em></p>
<p>Another use for this is to be able to style AJAX responses so we can simulate the user experience. An
example of this can be found in our <a href="/docs/components/site-modal/">Site Modal</a> page. Here we perform an
AJAX request that returns a static HTML form which our JavaScript places inside the body of a Bootstrap
Modal.</p>
<h2 id="sinatra-development">Sinatra Development</h2>
<p>Working with the <a href="http://sinatrarb.com">Sinatra</a> app is about as simple to work with as any web app you&rsquo;ll encounter.</p>
<p>How do we get both a Sinatra app and a Jekyll app working together? We run each server on a different port, so we can
make requests to either one at localhost simply by changing the port. We run our Jekyll development app on port <code>4000</code>,
and our Sinatra app on port <code>4567</code>.</p>
<ul>
<li>Jekyll server: [<code>{{ jekyll_host }}</code>]({{ jekyll_host }})</li>
<li>Sinatra server: <a href="/ajax/alert_success"><code>/ajax/alert_success</code></a></li>
</ul>
<h3 id="file-structure">File Structure</h3>
<p>In the root of the core-styles repo you&rsquo;ll find a folder named <code>sinatra</code>, this contains all your Sinatra related files.</p>
<pre><code class="language-tree" data-lang="tree">.
└── sinatra
    ├── server.rb
    └── views
        ├── search_results.erb
        ├── alert_success.erb
        └── etc.
</code></pre><p>There are basically two files to work with here. The <code>server.rb</code> is where we setup the routes we listen too, any
logic we need to run at that route, and assign a view to return. Then you create a view file that contains the HTML you
wish to return, these are erb files so you can put programming logic in there like you would in a Rails app.</p>
<h4 id="the-serverrb-file">The <code>server.rb</code> File</h4>
<p>You create routes in Sinatra like the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">get</span> <span class="s1">&#39;/foo&#39;</span> <span class="k">do</span>
  <span class="n">response</span><span class="o">[</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span> <span class="c1"># this allows AJAX from Jekyll pages</span>
  <span class="n">erb</span><span class="p">(</span> <span class="ss">:foo</span><span class="p">,</span> <span class="ss">layout</span><span class="p">:</span> <span class="ss">:layout_empty</span> <span class="p">)</span>
<span class="k">end</span>
</code></pre></div><p>This will respond to any <code>get</code> request coming into <code>/ajax/foo</code>, and will return the
<code>sinatra/views/foo.erb</code> file as specified by the <code>erb</code> tag on the last line. And it&rsquo;s that simple. The contents of the
view file don&rsquo;t need to do any anything fancy, just represent what a result would look like.</p>
<p>Here is real example we are using for the search results of the <a href="/docs/components/search/">Live Search</a> component.
You&rsquo;ll notice we are using <code>post</code> instead of <code>get</code>, we did this because our form uses the post method instead of the
get method. We also create a <code>@search</code> variable from the <code>search</code> parameter, which is accessible in our view.</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">post</span> <span class="s1">&#39;/search_results&#39;</span> <span class="k">do</span>
  <span class="n">response</span><span class="o">[</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span> <span class="c1"># this allows AJAX from Jekyll pages</span>
  <span class="vi">@search</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="s1">&#39;search&#39;</span><span class="o">]</span>
  <span class="n">erb</span><span class="p">(</span> <span class="ss">:search_results</span><span class="p">,</span> <span class="ss">layout</span><span class="p">:</span> <span class="ss">:layout_empty</span> <span class="p">)</span>
<span class="k">end</span>
</code></pre></div><p>One caveat on the whole get vs post thing is that if you want the Sinatra app to respond to both a get and a post you
need to make two entries in the <code>server.rb</code> file. For example, I made a generic success response that can be used
anywhere we need a nicely formatter success response, and I want it available for both get and post requests. So we have
two entries for it, like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">get</span> <span class="s1">&#39;/alert_success&#39;</span> <span class="k">do</span>
  <span class="n">response</span><span class="o">[</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span> <span class="c1"># this allows AJAX from Jekyll pages</span>
  <span class="n">erb</span><span class="p">(</span> <span class="ss">:alert_success</span><span class="p">,</span> <span class="ss">layout</span><span class="p">:</span> <span class="ss">:layout_empty</span> <span class="p">)</span>
<span class="k">end</span>

<span class="n">post</span> <span class="s1">&#39;/alert_success&#39;</span> <span class="k">do</span>
  <span class="n">response</span><span class="o">[</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span> <span class="c1"># this allows AJAX from Jekyll pages</span>
  <span class="n">erb</span><span class="p">(</span> <span class="ss">:alert_success</span><span class="p">,</span> <span class="ss">layout</span><span class="p">:</span> <span class="ss">:layout_empty</span> <span class="p">)</span>
<span class="k">end</span>
</code></pre></div><h4 id="the-view-files">The View Files</h4>
<p>The view files are located in the <code>/sinatra/views' folder. They are simple .erb files. Most of the time you can put  straight HTML in them, but they are erb files so you can display variables (e.g. </code>you serached for: &lt;%= @searech %&gt;) or
other ruby code like <code>if</code> statements.</p>
<p>Here is the view file <code>alert_success.erb</code> referenced in the <code>server.rb</code> code example above:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert alert-success&#34;</span> <span class="na">role</span><span class="o">=</span><span class="s">&#34;alert&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Success!<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> You did it! You should feel very proud of yourself right now!
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
  </main>
  
  <footer class="admin-footer docs-footer" role="contentinfo">
    
      <nav aria-label="breadcrumb navigation">
  <ol class="breadcrumb sans-serif">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    
    
        
            
                
                    
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
        
    
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
        
            <li class="breadcrumb-item"><a href="/guides/">Guides</a></li>
        
    
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
        
            <li class="breadcrumb-item"><a href="/guides/3.0/">3.0</a></li>
        
    
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
        
            <li class="breadcrumb-item"><a href="/guides/3.0/working-with-ajax/">Working with ajax</a></li>
        
    
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
                
                    
                
            
        
            
        
            
        
            
        
            
        
            
        
        
    
  </ol>
</nav>
    
  </footer>
</div>


  </section>

    <script src="https://kit.fontawesome.com/8bda546f76.js" crossorigin="anonymous"></script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.1/dist/umd/popper.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="/vendor/clipboard/dist/clipboard.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="/js/docs.js" crossorigin="anonymous"></script>
    <script src="/js/icon-grid.js" crossorigin="anonymous"></script>
    <script src="/js/muuri.js" crossorigin="anonymous"></script>
    <script src="/js/core-styles/tags.js" defer></script>
    <script src="/js/core-styles/ajax-form.js"></script>
    <script src="/js/core-styles/ajax-load.js"></script>
    <script src="/js/core-styles/bootstrap-data-attributes.js"></script>
    <script src="/js/core-styles/checkbox-selector.js"></script>
    <script src="/js/core-styles/shopping-list-power-bar.js"></script>
    <script src="/js/core-styles/filter-search.js"></script>
    <script src="/js/core-styles/form-toggles.js"></script>
    <script src="/js/core-styles/search.js"></script>
    <script src="/js/core-styles/circular-cookies.js"></script>
  </body>
</html>
